#!/usr/bin/env node


var program = require('./program');
var fs = require('fs');
var ncp = require('ncp').ncp;
var path = require('path');
var unzip = require('unzip');

ncp.limit = 16;
var path2Zip = path.resolve(__dirname,"../node_modules.zip");
var source = path.resolve(__dirname,"../prototype");

if( !fs.existsSync(path) ) {
  var path = program.cwd + '/restack-mobile-prototype'
  fs.mkdir(path, function(error){
    if(error){
      return console.error(error);
    }
    ncp(source, path, function (err) {
     if (err) {
       return console.error(err);
     }
     fs.createReadStream(path2Zip)
     .pipe(unzip.Extract({ path: source }));
     console.log('done!');
    });
  })
}
